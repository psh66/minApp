<view class="container">
  <!-- å¤´éƒ¨æ”¶ç›Šæ¦‚è§ˆ -->
  <view class="header-card">
    <view class="header-title">æˆ‘çš„å›¢é•¿æ”¶ç›Š</view>
    <view class="stats-row">
      <view class="stat-item">
        <view class="stat-label">å¾…ç»“ç®—</view>
        <view class="stat-value">Â¥{{pendingReward || 0}}</view>
      </view>
      <view class="stat-item">
        <view class="stat-label">å¯æç°</view>
        <view class="stat-value highlight">Â¥{{withdrawAble || 0}}</view>
      </view>
      <view class="stat-item">
        <view class="stat-label">æ€»æ¨å¹¿è®¢å•</view>
        <view class="stat-value">{{totalOrder || 0}} å•</view>
      </view>
    </view>
  </view>

  <!-- æ ¸å¿ƒæ“ä½œåŒº -->
  <view class="action-card">
    <button bindtap="copyLink" class="action-btn blue">ğŸ”— å¤åˆ¶æ¨å¹¿é“¾æ¥</button>
    <button bindtap="generatePoster" class="action-btn orange">ğŸ¨ ç”Ÿæˆæ¨å¹¿æµ·æŠ¥</button>
    <button bindtap="showWithdrawModal" class="action-btn green" disabled="{{withdrawAble < 1}}">ğŸ’¸ ç”³è¯·æç°ï¼ˆæ»¡1å…ƒå¯æï¼‰</button>
  </view>

  <!-- æ¨å¹¿è®¢å•è®°å½• -->
  <view class="order-card">
    <view class="card-title">æ¨å¹¿è®¢å•è®°å½•</view>
    <view wx:if="{{orderList.length === 0}}" class="empty-state">
      <view class="empty-icon">ğŸ“</view>
      <view class="empty-text">æš‚æ— æ¨å¹¿è®¢å•</view>
    </view>
    <view wx:for="{{orderList}}" wx:key="_id" class="order-item">
      <view class="order-info">
        <view class="order-no">è®¢å•å·ï¼š{{item.orderNo}}</view>
        <view class="order-amount">Â¥{{item.amount}}</view>
      </view>
      <view class="order-time">{{item.createTime && item.createTime.toLocaleString()}}</view>
    </view>
  </view>

  <!-- æç°è®°å½• -->
  <view class="withdraw-card">
    <view class="card-title">æç°è®°å½•</view>
    <view wx:if="{{withdrawRecords.length === 0}}" class="empty-state">
      <view class="empty-icon">ğŸ’³</view>
      <view class="empty-text">æš‚æ— æç°è®°å½•</view>
    </view>
    <view wx:for="{{withdrawRecords}}" wx:key="_id" class="withdraw-item">
      <view class="withdraw-info">
        <view class="withdraw-amount">Â¥{{item.amount}}</view>
        <view class="withdraw-status {{item.status}}">
          {{item.status === 'pending' ? 'å®¡æ ¸ä¸­' : (item.status === 'success' ? 'å·²æ‰“æ¬¾' : 'å·²é©³å›')}}
        </view>
      </view>
      <view class="withdraw-time">{{item.createTime && item.createTime.toLocaleString()}}</view>
    </view>
  </view>

  <!-- æç°ç”³è¯·å¼¹çª— -->
  <view class="modal" wx:if="{{showModal}}" bindtap="hideModal">
    <view class="modal-content" catchtap="stopPropagation">
      <view class="modal-title">ç”³è¯·æç°</view>
      <view class="form-group">
        <view class="form-label">æç°é‡‘é¢ï¼ˆå…ƒï¼‰</view>
        <input type="number" placeholder="è¯·è¾“å…¥æç°é‡‘é¢" value="{{withdrawForm.amount}}" bindinput="onAmountInput" class="form-input" />
      </view>
      <view class="form-group">
        <view class="form-label">å¾®ä¿¡æ”¶æ¬¾ç /å¾®ä¿¡å·ï¼ˆå¿…å¡«ï¼‰</view>
        <input placeholder="è¯·è¾“å…¥ä½ çš„å¾®ä¿¡æ”¶æ¬¾ç æˆ–å¾®ä¿¡å·" value="{{withdrawForm.payeeInfo}}" bindinput="onPayeeInfoInput" class="form-input" />
      </view>
      <view class="modal-actions">
        <button bindtap="hideModal" class="modal-btn cancel">å–æ¶ˆ</button>
        <button bindtap="applyWithdraw" class="modal-btn confirm">ç¡®è®¤æäº¤</button>
      </view>
    </view>
  </view>
</view>