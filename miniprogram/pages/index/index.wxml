<view class="container" style="padding: 20rpx; background: linear-gradient(to bottom, #f0f9ff, #ffffff); min-height: 100vh;">
<view wx:if="{{notice.showNotice}}" style="background: linear-gradient(90deg, #fff8e1 0%, #fff3cd 100%); padding: 12rpx 16rpx; border-radius: 8rpx; margin: 10rpx; display: flex; align-items: center; box-shadow: 0 2rpx 8rpx rgba(255, 125, 0, 0.1);">
  <!-- å–‡å­å›¾æ ‡ï¼ˆä½¿ç”¨emojiï¼Œæ— éœ€å›¾æ ‡åº“ï¼Œé¿å…é¢å¤–ä¾èµ–ï¼‰ -->
  <view style="margin-right: 12rpx; font-size: {{28 * fontSizeMultiple}}rpx;">
    ğŸ“¢
  </view>
  
  <!-- æ»šåŠ¨é€šçŸ¥æ–‡æœ¬å®¹å™¨ -->
  <view style="flex: 1; overflow: hidden; height: {{40 * fontSizeMultiple}}rpx; line-height: {{40 * fontSizeMultiple}}rpx;">
    <view class="notice-text" style="white-space: nowrap; position: relative; animation: scroll 20s linear infinite; font-size: {{24 * fontSizeMultiple}}rpx; color: #ff7d00; font-weight: 500;">
      {{notice.noticeContent}}
    </view>
  </view>
</view>
  <!-- æ¨¡å¼åˆ‡æ¢æŒ‰é’®ï¼ˆå³ä¸Šè§’ï¼‰ -->
  <view style="display: flex; justify-content: flex-end; margin-bottom: 20rpx;">
    <button bindtap="showModeSwitchSheet" style="background: #1890ff; color: white; border: none; padding: 12rpx 24rpx; border-radius: 8rpx; font-size: {{24 * fontSizeMultiple}}rpx; width: 200rpx;">
      {{isChildMode ? 'åˆ‡æ¢çˆ¶æ¯æ¨¡å¼' : 'åˆ‡æ¢å­å¥³æ¨¡å¼'}}
    </button>
  </view>

  <!-- ä»Šæ—¥ç­¾åˆ°ï¼ˆä»…çˆ¶æ¯æ¨¡å¼æ˜¾ç¤ºï¼‰ -->
  <view wx:if="{{!isChildMode}}" style="margin-bottom: 25rpx;">
    <view style="font-size: {{32 * fontSizeMultiple}}rpx; color: #333; margin-bottom: 10rpx;">ä»Šæ—¥ç­¾åˆ°</view>
    <view style="background: white; border-radius: 12rpx; padding: 12rpx; display: flex; align-items: center; box-shadow: 0 2rpx 8rpx rgba(0,0,0,0.05);">
      <view style="flex: 1; font-size: {{34 * fontSizeMultiple}}rpx; color: {{isSigned ? '#07c160' : '#ff4d4f'}}; font-weight: 500;">
        {{isSigned ? 'å·²ç­¾åˆ°' : 'æœªç­¾åˆ°'}}
      </view>
      <button bindtap="handleSign" disabled="{{isSigned || isTrialExpired}}" 
        style="width: 180rpx; background: {{isSigned || isTrialExpired ? '#ccc' : '#1890ff'}}; color: white; border: none; padding: 12rpx 0; border-radius: 12rpx; font-size: {{26 * fontSizeMultiple}}rpx; box-shadow: 0 4rpx 8rpx rgba(24, 144, 255, 0.3);">
        {{isSigned ? 'å·²å®Œæˆ' : (isTrialExpired ? 'è¯•ç”¨åˆ°æœŸ' : 'ä¸€é”®ç­¾åˆ°')}}
      </button>
    </view>
  </view>
<view style="margin-bottom: 25rpx;">
  <view style="font-size: {{32 * fontSizeMultiple}}rpx; color: #333; margin-bottom: 20rpx; display: flex; justify-content: space-between; align-items: center;">
    <text>{{isChildMode ? 'çˆ¶æ¯ç”¨è¯æé†’' : 'æˆ‘çš„ç”¨è¯æé†’'}}</text>
    <view style="display: flex; gap: 10rpx; align-items: center;">
        <button bindtap="goToMedicineSetting" 
        style="background: #1890ff; color: white; border: none; padding: 12rpx 20rpx; border-radius: 6rpx; font-size: {{22 * fontSizeMultiple}}rpx; line-height:1.2; height:auto; white-space:nowrap;width: 160rpx;">
       {{isChildMode ? 'ç®¡ç†æé†’' : 'è®¾ç½®æé†’'}}
      </button>
      <button bindtap="openNoticePermission" 
        style="background: #ff7d00; color: white; border: none; padding: 12rpx 20rpx; border-radius: 6rpx; font-size: {{22 * fontSizeMultiple}}rpx; line-height:1.2; height:auto; white-space:nowrap;width: 160rpx;">
        {{subscribeCount > 0 ? 'å¢åŠ æ¬¡æ•°' : 'å¼€å¯æé†’'}}
      </button>
      
      <view wx:if="{{subscribeCount > 0}}" style="font-size: {{26 * fontSizeMultiple}}rpx; color: #666;display: flex; align-items: center;">
        å‰©ä½™{{subscribeCount}}æ¬¡
      </view>
    </view>
  </view>

  <view style="background: white; border-radius: 12rpx; padding: 20rpx; box-shadow: 0 2rpx 8rpx rgba(0,0,0,0.05);">
    <view wx:if="{{!medicineRemindList || medicineRemindList.length === 0}}" 
      style="text-align: center; padding: 30rpx 0; color: #999; font-size: {{28 * fontSizeMultiple}}rpx;">
      ğŸ“… æš‚æ— ç”¨è¯æé†’
      <view style="margin-top: 10rpx; font-size: {{24 * fontSizeMultiple}}rpx;">
        {{isChildMode ? 'ç‚¹å‡»å³ä¾§ç®¡ç†æé†’æ·»åŠ ' : 'ç‚¹å‡»å³ä¾§è®¾ç½®æé†’æ·»åŠ '}}
      </view>
    </view>

    <view wx:else style="overflow-y: auto;max-height:200px">
      <view wx:for="{{medicineRemindList}}" wx:key="_id" 
        style="padding: 15rpx 0; border-bottom: {{index === medicineRemindList.length - 1 ? 'none' : '1px solid #f5f5f5'}};">
        
        <view style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8rpx;">
          <view style="font-size: {{30 * fontSizeMultiple}}rpx; color: #333; font-weight: 500;">{{item.medicineName}}</view>
          <view style="font-size: {{24 * fontSizeMultiple}}rpx; color: {{item.todayTakeStatus === 'completed' ? '#07c160' : item.todayTakeStatus === 'unfinished' ? '#ff4d4f' : '#ff7d00'}};">
            {{item.todayTakeStatus === 'completed' ? 'ä»Šæ—¥å·²æœè¯' : item.todayTakeStatus === 'unfinished' ? 'å¾…æœè¯' : 'å·²å»¶è¿Ÿ'}}
          </view>
        </view>

        <view style="font-size: {{24 * fontSizeMultiple}}rpx; color: #666; margin-bottom: 5rpx;">
          å‰‚é‡ï¼š{{item.dose || 'æœªè®¾ç½®'}} | è¯´æ˜ï¼š{{item.takeTimeDesc || 'æ— '}}
        </view>

        <!-- ä¿®å¤æ ¸å¿ƒï¼šå…ˆè½¬æ•°ç»„â†’åˆ¤æ–­é•¿åº¦â†’å¤„ç†é»˜è®¤å€¼ -->
        <view style="font-size: {{24 * fontSizeMultiple}}rpx; color: #666;">
           <view style="font-size:{{fontSizeMultiple*26}}rpx;color:#666;margin-bottom:8rpx;display:flex;align-items:center;">
      æé†’æ—¶é—´ï¼š
      <view wx:for="{{item.remindTime}}" wx:key="*this" wx:for-item="time" >
        {{time}}<text wx:if="{{index !== item.remindTime.length - 1}}">ã€</text>
      </view>
      <view wx:if="{{!item.remindTime || item.remindTime.length === 0}}">æœªè®¾ç½®</view>
    </view>
      <view style="font-size:{{fontSizeMultiple*26}}rpx;color:#666;display:flex;align-items:center;">
      é‡å¤å‘¨æœŸï¼š
      <view wx:for="{{item.repeatDays}}" wx:key="*this" wx:for-item="day">
        {{day}}<text wx:if="{{index !== item.repeatDays.length - 1}}">ã€</text>
      </view>
      <view wx:if="{{!item.repeatDays || item.repeatDays.length === 0}}">æœªè®¾ç½®</view>
    </view>
        </view>
        <view wx:if="{{!isChildMode && item.todayTakeStatus !== 'completed'}}" style="margin-top: 10rpx;">
          <button bindtap="confirmTakeMedicine" data-remind-id="{{item._id}}" 
            style="background: #07c160; color: white; border: none; padding: 8rpx 15rpx; border-radius: 8rpx; font-size: {{24 * fontSizeMultiple}}rpx;">
            æˆ‘å·²æœè¯
          </button>
        </view>
      </view>
    </view>
  </view>
</view>
<!-- ==================== æˆ‘çš„è¡€å‹ ==================== -->
<view style="margin-bottom: 25rpx;">
  <view style="font-size: {{32 * fontSizeMultiple}}rpx; color: #333; margin-bottom: 20rpx; display: flex; justify-content: space-between; align-items: center;">
    <text>{{isChildMode ? 'çˆ¶æ¯è¡€å‹è®°å½•' : 'æˆ‘çš„è¡€å‹è®°å½•'}}</text>
    <view style="display: flex; gap: 10rpx;">
      <button bindtap="showBloodPressureDialog"
        style="background: #722ED1; color: white; border: none; padding: 12rpx 20rpx; border-radius: 6rpx; font-size: {{22 * fontSizeMultiple}}rpx; width:160rpx;">
        è®°è¡€å‹
      </button>
      <button bindtap="showBpChart"
        style="background: #13C2C2; color: white; border: none; padding: 12rpx 20rpx; border-radius: 6rpx; font-size: {{22 * fontSizeMultiple}}rpx; width:160rpx;">
        çœ‹è¶‹åŠ¿
      </button>
    </view>
  </view>

  <view style="background: white; border-radius: 12rpx; padding: 20rpx; box-shadow: 0 2rpx 8rpx rgba(0,0,0,0.05);">
    <view wx:if="{{!bloodPressureList || bloodPressureList.length === 0}}"
      style="text-align: center; padding: 30rpx 0; color: #999; font-size: {{28 * fontSizeMultiple}}rpx;">
      ğŸ©¸ æš‚æ— è¡€å‹è®°å½•
    </view>

    <view wx:else style="overflow-y: auto;max-height:100px">
      <view wx:for="{{bloodPressureList}}" wx:key="_id"
        style="padding: 15rpx 0; border-bottom: {{index === bloodPressureList.length-1 ? 'none' : '1px solid #f5f5f5'}};">
        <view style="display: flex; justify-content: space-between; font-size: {{28 * fontSizeMultiple}}rpx;">
          <view>é«˜å‹ï¼š{{item.high}} mmHg</view>
          <view>ä½å‹ï¼š{{item.low}} mmHg</view>
        </view>
        <view style="font-size: {{24 * fontSizeMultiple}}rpx; color: #999; margin-top:6rpx;">
          {{item.date}}
        </view>
      </view>
    </view>
  </view>
</view>
  <!-- å­å¥³æ¨¡å¼ï¼šçˆ¶æ¯ç­¾åˆ°è®°å½•æ¨¡å— -->
  <view wx:if="{{isChildMode}}" style="margin-bottom: 25rpx;">
    <view style="font-size: {{32 * fontSizeMultiple}}rpx; color: #333; margin-bottom: 10rpx;">çˆ¶æ¯ç­¾åˆ°è®°å½•</view>
    <view style="background: white; border-radius: 12rpx; padding: 15rpx; box-shadow: 0 2rpx 8rpx rgba(0,0,0,0.05);">
      <!-- ä»Šæ—¥ç­¾åˆ°çŠ¶æ€ -->
      <view style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15rpx; padding-bottom: 15rpx; border-bottom: 1px solid #f5f5f5;">
        <view style="font-size: {{28 * fontSizeMultiple}}rpx; color: #666;">ä»Šæ—¥ç­¾åˆ°</view>
        <view style="font-size: {{34 * fontSizeMultiple}}rpx; color: {{parentSignStatus ? '#07c160' : '#ff4d4f'}}; font-weight: 500;">
          {{parentSignStatus ? 'å·²ç­¾åˆ°' : 'æœªç­¾åˆ°'}}
        </view>
      </view>
      <!-- æœ€è¿‘7å¤©ç­¾åˆ°è®°å½• -->
      <view style="font-size: {{26 * fontSizeMultiple}}rpx; color: #666; margin-bottom: 10rpx;">æœ€è¿‘7å¤©ç­¾åˆ°</view>
      <view style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 10rpx;">
        <view wx:for="{{parentSignHistory}}" wx:key="date" style="text-align: center; flex: 1; min-width: 80rpx;">
          <view style="font-size: {{22 * fontSizeMultiple}}rpx; color: #666;">{{item.date}}</view>
          <view style="width: 40rpx; height: 40rpx; border-radius: 50%; margin: 8rpx auto; display: flex; align-items: center; justify-content: center; background: {{item.isSigned ? '#07c160' : '#f5f5f5'}};">
            <text style="font-size: {{20 * fontSizeMultiple}}rpx; color: {{item.isSigned ? 'white' : '#ccc'}};">{{item.isSigned ? 'âœ“' : 'Ã—'}}</text>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- å¤©æ°”æŠ¥å‘Šæ¨¡å—ï¼ˆåŒæ–¹æ¨¡å¼å‡æ˜¾ç¤ºï¼‰ -->
  <view style="background: white; border-radius: 16rpx; padding: 20rpx; margin-bottom: 25rpx; box-shadow: 0 2rpx 8rpx rgba(0,0,0,0.05);">
    <view style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15rpx;">
      <view style="font-size: {{30 * fontSizeMultiple}}rpx; color: #333; font-weight: 500;">å¤©æ°”æŠ¥å‘Š</view>
      <view class="weather-tabs">
        <view data-index="0" bindtap="switchWeatherTab" style="padding: 8rpx 15rpx; border-radius: 8rpx; font-size: {{26 * fontSizeMultiple}}rpx; {{currentWeatherTab === 0 ? 'background: #1890ff; color: white;' : 'background: #f5f5f5; color: #333;'}}">ä»Šå¤©</view>
        <view data-index="1" bindtap="switchWeatherTab" style="padding: 8rpx 15rpx; border-radius: 8rpx; font-size: {{26 * fontSizeMultiple}}rpx; {{currentWeatherTab === 1 ? 'background: #1890ff; color: white;' : 'background: #f5f5f5; color: #333;'}}">æ˜å¤©</view>
        <view data-index="2" bindtap="switchWeatherTab" style="padding: 8rpx 15rpx; border-radius: 8rpx; font-size: {{26 * fontSizeMultiple}}rpx; {{currentWeatherTab === 2 ? 'background: #1890ff; color: white;' : 'background: #f5f5f5; color: #333;'}}">åå¤©</view>
      </view>
    </view>
    <view style="background: #f5faff; border-radius: 12rpx; padding: 20rpx; height: 80rpx; display: flex; align-items: center; justify-content: space-between;">
      <view style="font-size: {{60 * fontSizeMultiple}}rpx;">{{activeWeatherData.icon}}</view>
      <view style="text-align: center; flex: 1; margin: 0 15rpx;">
        <view style="font-size: {{32 * fontSizeMultiple}}rpx; color: #333; font-weight: bold;">{{activeWeatherData.temp}}</view>
        <view style="font-size: {{26 * fontSizeMultiple}}rpx; color: #666; margin-top: 5rpx;">{{activeWeatherData.desc}}</view>
      </view>
      <button bindtap="openWeatherDetail" style="background: #1890ff; color: white; border: none; padding: 12rpx 20rpx; border-radius: 8rpx; font-size: {{22 * fontSizeMultiple}}rpx; width: 160rpx;">æŸ¥çœ‹è¯¦æƒ…</button>
    </view>
  </view>
  <!-- å¤‡æ³¨ä¸å®¶åº­ä½ç½®ï¼ˆå­å¥³å¯ç®¡ç†ï¼‰ -->
  <view style="margin-bottom: 25rpx;">
    <view style="font-size: {{32 * fontSizeMultiple}}rpx; color: #333; margin-bottom: 10rpx;">
      {{isChildMode ? 'çˆ¶æ¯å¤‡æ³¨ä¸å®¶åº­ä½ç½®' : 'æˆ‘çš„å¤‡æ³¨'}}
    </view>
    <view style="background: white; border-radius: 12rpx; padding: 12rpx; box-shadow: 0 2rpx 8rpx rgba(0,0,0,0.05);">
      <view style="display: flex; align-items: center; margin-bottom: 15rpx;">
        <input style="flex: 1; padding: 12rpx; border: 1px solid #eee; border-radius: 8rpx; font-size: {{28 * fontSizeMultiple}}rpx; margin-right: 10rpx; border: {{focusUserName ? '2px solid #1890ff' : '1px solid #eee'}};" placeholder="è¯·è¾“å…¥å§“åæˆ–ç®€ç§°" value="{{userName}}" bindinput="onUserNameInput" bindfocus="()=>{focusUserName=true}" bindblur="()=>{focusUserName=false}" disabled="{{isTrialExpired && !isChildMode}}"/>
        <button bindtap="saveUserName" disabled="{{isTrialExpired && !isChildMode}}" style="width: 180rpx; background: {{(isTrialExpired && !isChildMode) ? '#ccc' : '#1890ff'}}; color: white; border: none; padding: 12rpx 0; border-radius: 12rpx; font-size: {{26 * fontSizeMultiple}}rpx; box-shadow: 0 4rpx 8rpx rgba(24, 144, 255, 0.3);">ä¿å­˜</button>
      </view>
      <view style="display: flex; align-items: center;">
        <view style="flex: 1; font-size: {{28 * fontSizeMultiple}}rpx; color: #666;">{{homeLocation ? 'å®¶åº­ä½ç½®å·²è®¾ç½®' : 'æœªè®¾ç½®å®¶åº­ä½ç½®'}}</view>
        <button bindtap="setHomeLocation" disabled="{{isTrialExpired && !isChildMode}}" style="width: 180rpx; background: {{(isTrialExpired && !isChildMode) ? '#ccc' : '#07c160'}}; color: white; border: none; padding: 12rpx 0; border-radius: 12rpx; font-size: {{26 * fontSizeMultiple}}rpx; box-shadow: 0 4rpx 8rpx rgba(7, 193, 96, 0.3);">è®¾ç½®ä½ç½®</button>
      </view>
    </view>
  </view>
    <!-- ç´§æ€¥å‘¼å«ï¼ˆä»…çˆ¶æ¯æ¨¡å¼æ˜¾ç¤ºï¼‰ -->
  <view wx:if="{{!isChildMode}}" style="margin-bottom: 25rpx;">
    <view style="font-size: {{32 * fontSizeMultiple}}rpx; color: #333; margin-bottom: 10rpx;">ç´§æ€¥å‘¼å«</view>
    <view style="background: white; border-radius: 12rpx; padding: 15rpx; display: flex; gap: 10rpx; box-shadow: 0 2rpx 8rpx rgba(0,0,0,0.05);">
      <button bindtap="callPhone" data-phone="120" style="background: #ff4d4f; color: white; border: none; padding: 12rpx 15rpx; border-radius: 8rpx; font-size: {{26 * fontSizeMultiple}}rpx; flex: 1;">120 æ€¥æ•‘ä¸­å¿ƒ</button>
      <button bindtap="callPhone" data-phone="110" style="background: #1890ff; color: white; border: none; padding: 12rpx 15rpx; border-radius: 8rpx; font-size: {{26 * fontSizeMultiple}}rpx; flex: 1;">110 æŠ¥è­¦ç”µè¯</button>
      <button bindtap="callPhone" data-phone="119" style="background: #ff7d00; color: white; border: none; padding: 12rpx 15rpx; border-radius: 8rpx; font-size: {{26 * fontSizeMultiple}}rpx; flex: 1;">119 ç«è­¦ç”µè¯</button>
    </view>
  </view>

  <!-- ç´§æ€¥å·¥å…·ï¼ˆä»…çˆ¶æ¯æ¨¡å¼æ˜¾ç¤ºï¼‰ -->
  <view wx:if="{{!isChildMode}}" style="margin-bottom: 25rpx;">
    <view style="font-size: {{32 * fontSizeMultiple}}rpx; color: #333; margin-bottom: 10rpx;">ç´§æ€¥å·¥å…·</view>
    <view style="background: white; border-radius: 12rpx; padding: 15rpx; display: flex; gap: 10rpx; box-shadow: 0 2rpx 8rpx rgba(0,0,0,0.05);">
      <button bindtap="goHome" disabled="{{isTrialExpired}}"
        style="background: {{isTrialExpired ? '#ccc' : '#ff7d00'}}; color: white; border: none; padding: 12rpx 0; border-radius: 12rpx; font-size: {{26 * fontSizeMultiple}}rpx; flex: 1; box-shadow: 0 4rpx 8rpx rgba(255, 125, 0, 0.3);">
        ä¸€é”®å›å®¶
      </button>
      <button bindtap="sendLocation" disabled="{{isTrialExpired}}"
        style="background: {{isTrialExpired ? '#ccc' : '#1890ff'}}; color: white; border: none; padding: 12rpx 0; border-radius: 12rpx; font-size: {{26 * fontSizeMultiple}}rpx; flex: 1; box-shadow: 0 4rpx 8rpx rgba(24, 144, 255, 0.3);">
        ä¸€é”®å‘é€å®šä½
      </button>
    </view>
  </view>
  <!-- æˆ‘çš„è”ç³»äººï¼ˆå­å¥³å¯ç®¡ç†çˆ¶æ¯ç«¯ï¼‰ -->
  <view style="margin-bottom: 25rpx;">
    <view style="font-size: {{32 * fontSizeMultiple}}rpx; color: #333; margin-bottom: 10rpx;">
      {{isChildMode ? 'çˆ¶æ¯è”ç³»äºº' : 'æˆ‘çš„è”ç³»äºº'}}
    </view>
    <view style="background: white; border-radius: 16rpx; box-shadow: 0 2rpx 8rpx rgba(0,0,0,0.05);">
      <view wx:for="{{contactsList}}" wx:key="_id" style="padding: 15rpx; border-bottom: 1px solid #f5f5f5; display: flex; justify-content: space-between; align-items: center;">
        <view style="font-size: {{30 * fontSizeMultiple}}rpx; color: #333; font-weight: 500;">{{item.name}}</view>
        <view style="display: flex; gap: 10rpx; width: 60%;">
          <button bindtap="callPhone" data-phone="{{item.phone}}" style="background: #1890ff; color: white; border: none; padding: 12rpx 0; border-radius: 12rpx; font-size: {{26 * fontSizeMultiple}}rpx; flex: 1; box-shadow: 0 4rpx 8rpx rgba(24, 144, 255, 0.3);">æ‰“ç”µè¯</button>
          <button bindtap="deleteContact" data-id="{{item._id}}" disabled="{{isTrialExpired && !isChildMode}}"
            style="background: {{(isTrialExpired && !isChildMode) ? '#ccc' : '#ff4d4f'}}; color: white; border: none; padding: 12rpx 0; border-radius: 12rpx; font-size: {{26 * fontSizeMultiple}}rpx; flex: 1; box-shadow: 0 4rpx 8rpx rgba(255, 77, 79, 0.3);">
            åˆ é™¤
          </button>
        </view>
      </view>
      <button bindtap="showAddDialog" disabled="{{isTrialExpired && !isChildMode}}"
        style="width: 100%; background: {{(isTrialExpired && !isChildMode) ? '#ccc' : 'linear-gradient(to right, #07c160, #06b358)'}}; color: white; border: none; padding: 18rpx 0; border-radius: 0 0 16rpx 16rpx; font-size: {{30 * fontSizeMultiple}}rpx; box-shadow: 0 4rpx 8rpx rgba(7, 193, 96, 0.3);">
        {{(isTrialExpired && !isChildMode) ? 'è¯•ç”¨åˆ°æœŸ' : 'æ·»åŠ è”ç³»äºº'}}
      </button>
    </view>
  </view>

  <!-- æé†’é‚®ç®±ï¼ˆå­å¥³å¯ç®¡ç†çˆ¶æ¯ç«¯ï¼‰ -->
  <view style="margin-bottom: 25rpx;">
    <view style="font-size: {{32 * fontSizeMultiple}}rpx; color: #333; margin-bottom: 10rpx;">
      {{isChildMode ? 'çˆ¶æ¯æé†’é‚®ç®±' : 'æé†’é‚®ç®±'}}
    </view>
    <view style="background: white; border-radius: 16rpx; box-shadow: 0 2rpx 8rpx rgba(0,0,0,0.05); overflow: hidden;">
      <view wx:for="{{emailList}}" wx:key="_id" style="padding: 15rpx; border-bottom: 1px solid #f5f5f5; display: flex; justify-content: space-between; align-items: center;">
        <view style="font-size: {{30 * fontSizeMultiple}}rpx; color: #333; font-weight: 500;">{{item.email}}</view>
        <view style="width: 35%;">
          <button bindtap="deleteEmail" data-id="{{item._id}}" disabled="{{isTrialExpired && !isChildMode}}"
            style="background: {{(isTrialExpired && !isChildMode) ? '#ccc' : '#ff4d4f'}}; color: white; border: none; padding: 12rpx 0; border-radius: 12rpx; font-size: {{26 * fontSizeMultiple}}rpx; width: 100%; box-shadow: 0 4rpx 8rpx rgba(255, 77, 79, 0.3);">
            åˆ é™¤
          </button>
        </view>
      </view>
      <button bindtap="showEmailDialog" disabled="{{isTrialExpired && !isChildMode}}"
        style="width: 100%; background: {{(isTrialExpired && !isChildMode) ? '#ccc' : 'linear-gradient(to right, #07c160, #06b358)'}}; color: white; border: none; padding: 18rpx 0; font-size: {{30 * fontSizeMultiple}}rpx; box-shadow: 0 4rpx 8rpx rgba(7, 193, 96, 0.3);">
        {{(isTrialExpired && !isChildMode) ? 'è¯•ç”¨åˆ°æœŸ' : 'æ·»åŠ æé†’é‚®ç®±'}}
      </button>
    </view>
  </view>
  <!-- å¼¹çª—ç»„ä»¶ï¼ˆæ‰€æœ‰æ¨¡å¼é€šç”¨ï¼‰ -->
  <!-- æ·»åŠ é‚®ç®±å¼¹çª— -->
  <view wx:if="{{showEmailDialog}}" style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); z-index: 999; display: flex; align-items: center; justify-content: center;">
    <view style="width: 80%; background: white; border-radius: 16rpx; padding: 30rpx; box-shadow: 0 6rpx 16rpx rgba(0,0,0,0.1);">
      <view style="font-size: {{34 * fontSizeMultiple}}rpx; font-weight: bold; text-align: center; margin-bottom: 30rpx; color: #333;">{{isChildMode ? 'æ·»åŠ çˆ¶æ¯æé†’é‚®ç®±' : 'æ·»åŠ æé†’é‚®ç®±'}}</view>
      <view style="display: flex; align-items: center; margin-bottom: 30rpx;">
        <view style="width: 100rpx; font-size: {{32 * fontSizeMultiple}}rpx; text-align: right; color: #333;">é‚®ç®±</view>
        <input
          placeholder="ç”¨äºè¿ç»­æœªç­¾åˆ°æ—¶æ¥æ”¶æé†’é‚®ä»¶"
          value="{{email}}"
          bindinput="emailChange"
          type="email"
          style="font-size: {{32 * fontSizeMultiple}}rpx; flex: 1; border: 1px solid #eee; border-radius: 6rpx; padding: 12rpx; margin-left: 10rpx; border: {{focusEmail ? '2px solid #1890ff' : '1px solid #eee'}};"
          bindfocus="()=>{focusEmail=true}" bindblur="()=>{focusEmail=false}"
          placeholder-style="text-align: left; color: #999; font-size: {{30 * fontSizeMultiple}}rpx;"
        />
      </view>
      <view style="display: flex; gap: 20rpx;">
        <button bindtap="bindEmail" style="flex: 1; background: #07c160; color: white; border: none; padding: 15rpx 0; border-radius: 8rpx; font-size: {{32 * fontSizeMultiple}}rpx; border: none;">ä¿å­˜</button>
        <button bindtap="cancelBindEmail" style="flex: 1; background: #f5f5f5; color: #333; padding: 15rpx 0; border-radius: 8rpx; font-size: {{32 * fontSizeMultiple}}rpx; border: none;">å–æ¶ˆ</button>
      </view>
    </view>
  </view>

  <!-- æ·»åŠ è”ç³»äººå¼¹çª— -->
  <view wx:if="{{showAddDialog}}" style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); z-index: 999; display: flex; align-items: center; justify-content: center;">
    <view style="width: 80%; background: white; border-radius: 16rpx; padding: 30rpx; box-shadow: 0 6rpx 16rpx rgba(0,0,0,0.1);">
      <view style="font-size: {{34 * fontSizeMultiple}}rpx; font-weight: bold; text-align: center; margin-bottom: 30rpx; color: #333;">{{isChildMode ? 'æ·»åŠ çˆ¶æ¯ç´§æ€¥è”ç³»äºº' : 'æ·»åŠ ç´§æ€¥è”ç³»äºº'}}</view>
      <input
        placeholder="è¯·è¾“å…¥å§“å"
        value="{{contactForm.name}}"
        bindinput="onFormChange"
        data-key="name"
        style="font-size: {{32 * fontSizeMultiple}}rpx; margin-bottom: 20rpx; border: 1px solid #eee; border-radius: 6rpx; padding: 12rpx; border: {{focusContactName ? '2px solid #1890ff' : '1px solid #eee'}};"
        bindfocus="()=>{focusContactName=true}" bindblur="()=>{focusContactName=false}"
        placeholder-style="font-size: {{30 * fontSizeMultiple}}rpx; color: #999;"
      />
      <input
        placeholder="è¯·è¾“å…¥æ‰‹æœºå·"
        value="{{contactForm.phone}}"
        bindinput="onFormChange"
        data-key="phone"
        type="number"
        maxlength="11"
        style="font-size: {{32 * fontSizeMultiple}}rpx; margin-bottom: 30rpx; border: 1px solid #eee; border-radius: 6rpx; padding: 12rpx; border: {{focusContactPhone ? '2px solid #1890ff' : '1px solid #eee'}};"
        bindfocus="()=>{focusContactPhone=true}" bindblur="()=>{focusContactPhone=false}"
        placeholder-style="font-size: {{30 * fontSizeMultiple}}rpx; color: #999;"
      />
      <view style="display: flex; gap: 20rpx;">
        <button bindtap="onConfirmAddContact" style="flex: 1; background: #07c160; color: white; border: none; padding: 15rpx 0; border-radius: 8rpx; font-size: {{32 * fontSizeMultiple}}rpx; border: none;">ä¿å­˜</button>
        <button bindtap="onCancelAddContact" style="flex: 1; background: #f5f5f5; color: #333; padding: 15rpx 0; border-radius: 8rpx; font-size: {{32 * fontSizeMultiple}}rpx; border: none;">å–æ¶ˆ</button>
      </view>
    </view>
  </view>

  <!-- æ”¯ä»˜å¼¹çª— -->
  <view wx:if="{{showPayDialog}}" style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); z-index: 999; display: flex; align-items: center; justify-content: center;">
    <view style="width: 80%; background: white; border-radius: 16rpx; padding: 30rpx; box-shadow: 0 6rpx 16rpx rgba(0,0,0,0.1);">
      <view style="font-size: {{34 * fontSizeMultiple}}rpx; font-weight: bold; text-align: center; margin-bottom: 30rpx; color: #333;">{{isChildMode ? 'ä¸ºçˆ¶æ¯å‡çº§/ç»­è´¹' : (isFormalVersion ? 'ç»­è´¹ä¼šå‘˜' : 'å‡çº§æ­£å¼ç‰ˆ')}}</view>
      <view style="font-size: {{26 * fontSizeMultiple}}rpx; color: #666; text-align: center; margin-bottom: 20rpx;">
        {{isFormalVersion ? 'é€‰æ‹©ç»­è´¹æ—¶é•¿' : 'è¯•ç”¨åˆ°æœŸåï¼Œå‡çº§æ­£å¼ç‰ˆå³å¯ç»§ç»­ä½¿ç”¨å…¨éƒ¨åŠŸèƒ½'}}
      </view>
      <view style="display: flex; gap: 20rpx; margin-bottom: 30rpx;">
        <button bindtap="choosePayType" data-type="month" style="flex: 1; background: #f5f5f5; color: #333; padding: 15rpx 0; border-radius: 8rpx; font-size: {{28 * fontSizeMultiple}}rpx; border: none;">æœˆä»˜<br/>3å…ƒ/æœˆ</button>
        <button bindtap="choosePayType" data-type="year" style="flex: 1; background: #ff7d00; color: white; padding: 15rpx 0; border-radius: 8rpx; font-size: {{28 * fontSizeMultiple}}rpx; border: none;">å¹´ä»˜<br/>20å…ƒ/å¹´</button>
      </view>
      <button bindtap="closePayDialog" style="width: 100%; background: #f5f5f5; color: #333; padding: 15rpx 0; border-radius: 8rpx; font-size: {{28 * fontSizeMultiple}}rpx; border: none;">å–æ¶ˆ</button>
    </view>
  </view>

  <!-- å¤©æ°”è¯¦æƒ…å¼¹çª— -->
  <view wx:if="{{showWeatherDetail}}" style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); z-index: 1000; display: flex; align-items: center; justify-content: center;">
    <view style="background: white; border-radius: 16rpx; padding: 30rpx; width: 85%; max-height: 70vh; overflow-y: auto;">
      <view style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20rpx;">
        <view style="font-size: {{32 * fontSizeMultiple}}rpx; font-weight: 500;">æœªæ¥3å¤©å¤©æ°”è¯¦æƒ…</view>
        <button bindtap="closeWeatherDetail" style="font-size: {{28 * fontSizeMultiple}}rpx; color: #ff4d4f;">å…³é—­</button>
      </view>
      <view wx:for="{{weatherList}}" wx:key="date" style="padding: 15rpx 0; border-bottom: 1px solid #f5f5f5; display: flex; justify-content: space-between; align-items: center;">
        <view style="font-size: {{28 * fontSizeMultiple}}rpx; color: #333;">{{item.date}}</view>
        <view style="font-size: {{28 * fontSizeMultiple}}rpx; color: #666;">{{item.weather}}</view>
        <view style="font-size: {{28 * fontSizeMultiple}}rpx; color: #1890ff; font-weight: bold;">{{item.tempMin}}~{{item.tempMax}}Â°C</view>
      </view>
    </view>
  </view>

  <!-- æ¨¡å¼åˆ‡æ¢å¼¹çª— -->
  <view wx:if="{{showModeSheet}}" style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); z-index: 999; display: flex; align-items: center; justify-content: center;">
    <view style="width: 80%; background: white; border-radius: 16rpx; padding: 30rpx;">
      <view style="font-size: {{32 * fontSizeMultiple}}rpx; font-weight: 500; text-align: center; margin-bottom: 30rpx;">{{!isChildMode ? 'åˆ‡æ¢è‡³å­å¥³æ¨¡å¼' : 'åˆ‡æ¢è‡³çˆ¶æ¯æ¨¡å¼'}}</view>
      <view wx:if="{{!isChildMode}}" style="margin-bottom: 30rpx;">
        <view style="font-size: {{22 * fontSizeMultiple}}rpx; color: #666; margin-bottom: 8rpx; text-align: left;">çˆ¶æ¯è´¦å·ç»‘å®šç ï¼ˆ6ä½æ•°å­—ï¼‰</view>
        <input placeholder="è¯·è¾“å…¥çˆ¶æ¯è´¦å·ç»‘å®šç " value="{{bindCode}}" bindinput="onBindCodeInput" style="font-size: {{28 * fontSizeMultiple}}rpx; border: 1px solid #eee; border-radius: 8rpx; padding: 12rpx; border: {{focusBindCode ? '2px solid #1890ff' : '1px solid #eee'}};" bindfocus="()=>{focusBindCode=true}" bindblur="()=>{focusBindCode=false}"/>
      </view>
      <view style="display: flex; gap: 20rpx;">
        <button bindtap="confirmModeSwitch" style="flex: 1; background: #1890ff; color: white; border: none; padding: 15rpx 0; border-radius: 8rpx; font-size: {{28 * fontSizeMultiple}}rpx;">ç¡®è®¤</button>
        <button bindtap="cancelModeSwitch" style="flex: 1; background: #f5f5f5; color: #333; border: none; padding: 15rpx 0; border-radius: 8rpx; font-size: {{28 * fontSizeMultiple}}rpx;">å–æ¶ˆ</button>
      </view>
    </view>
  </view>
  <!-- è®°å½•è¡€å‹å¼¹çª— -->
<view wx:if="{{showBloodPressureDialog}}" style="position: fixed; top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.5);z-index:999;display:flex;align-items:center;justify-content:center;">
  <view style="width:80%;background:#fff;border-radius:16rpx;padding:30rpx;">
    <view style="font-size:{{34 * fontSizeMultiple}}rpx; text-align:center; margin-bottom:30rpx;">
      {{isChildMode ? 'æ·»åŠ çˆ¶æ¯è¡€å‹' : 'æ·»åŠ æˆ‘çš„è¡€å‹'}}
    </view>

    <input placeholder="è¯·è¾“å…¥é«˜å‹" type="digit" data-key="high"
      bindinput="onBpFormChange" value="{{bpForm.high}}"
      style="border:1px solid #eee;border-radius:8rpx;padding:16rpx;font-size:{{30*fontSizeMultiple}}rpx;margin-bottom:20rpx;"/>

    <input placeholder="è¯·è¾“å…¥ä½å‹" type="digit" data-key="low"
      bindinput="onBpFormChange" value="{{bpForm.low}}"
      style="border:1px solid #eee;border-radius:8rpx;padding:16rpx;font-size:{{30*fontSizeMultiple}}rpx;margin-bottom:40rpx;"/>

    <view style="display:flex;gap:20rpx;">
      <button bindtap="confirmAddBloodPressure" style="flex:1;background:#722ED1;color:white;">ä¿å­˜</button>
      <button bindtap="cancelAddBloodPressure" style="flex:1;background:#f5f5f5;">å–æ¶ˆ</button>
    </view>
  </view>
</view>
</view>