<view class="container" style="padding: 20rpx; background: linear-gradient(to bottom, #f0f9ff, #ffffff);">
  <!-- ф╗КцЧечн╛хИ░я╝ИхоМхЕихп╣щ╜РцЙУчФ╡шпЭцМЙщТоца╖х╝П + хКицАБцЦЗхнЧя╝Й -->
  <view style="margin-bottom: 25rpx;">
    <view style="font-size: 32rpx; color: #333; margin-bottom: 10rpx;">ф╗КцЧечн╛хИ░</view>
    <view style="background: white; border-radius: 12rpx; padding: 12rpx; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 2rpx 8rpx rgba(0,0,0,0.05);">
      <!-- хКицАБч╗СхоЪчн╛хИ░цЦЗхнЧхТМщвЬшЙ▓ -->
      <view style="font-size: 34rpx; color: {{isSigned ? '#07c160' : '#ff4d4f'}}; font-weight: 500;">
        {{isSigned ? 'х╖▓чн╛хИ░' : 'цЬкчн╛хИ░'}}
      </view>
      <!-- хоМхЕихМ╣щЕНцЙУчФ╡шпЭцМЙщТочЪДца╖х╝П -->
      <button bindtap="handleSign" disabled="{{isSigned}}" style="background: #1890ff; color: white; border: none; padding: 8rpx 0; border-radius: 12rpx; font-size: 26rpx; width: 40%; box-shadow: 0 4rpx 8rpx rgba(24, 144, 255, 0.3);">
        {{isSigned ? 'х╖▓хоМцИР' : 'ф╕АщФочн╛хИ░'}}
      </button>
    </view>
  </view>

  <!-- ========== цЦ░хвЮя╝ЪцИСчЪДхдЗц│ия╝ИхРлхо╢х║нф╜Нч╜ошо╛ч╜оя╝Й ========== -->
  <view style="margin-bottom: 25rpx;">
    <view style="font-size: 32rpx; color: #333; margin-bottom: 10rpx;">цИСчЪДхдЗц│и</view>
    <view style="background: white; border-radius: 12rpx; padding: 12rpx; box-shadow: 0 2rpx 8rpx rgba(0,0,0,0.05);">
      <!-- хзУхРНш╛УхЕешбМ -->
      <view style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15rpx;">
        <input 
          style="width: 60%; padding: 8rpx; border: 1px solid #eee; border-radius: 8rpx; font-size: 28rpx;"
          placeholder="шп╖ш╛УхЕецВичЪДхзУхРНцИЦчоАчз░я╝ИхжВя╝Ъх╝аф╕Й/шАБх╝ая╝Й"
          value="{{userName}}"
          bindinput="onUserNameInput"
        />
        <button 
          bindtap="saveUserName"
          style="background: #1890ff; color: white; border: none; padding: 8rpx 0; border-radius: 12rpx; font-size: 26rpx; width: 30%; box-shadow: 0 4rpx 8rpx rgba(24, 144, 255, 0.3);">
          ф┐ЭхнШ
        </button>
      </view>
      <!-- хо╢х║нф╜Нч╜ошо╛ч╜ошбМ -->
      <view style="display: flex; justify-content: space-between; align-items: center;">
        <view style="font-size: 28rpx; color: #666;">
          {{homeLocation ? 'хо╢х║нф╜Нч╜ох╖▓шо╛ч╜о' : 'цЬкшо╛ч╜охо╢х║нф╜Нч╜о'}}
        </view>
        <button 
          bindtap="setHomeLocation"
          style="background: #07c160; color: white; border: none; padding: 8rpx 0; border-radius: 12rpx; font-size: 26rpx; width: 30%; box-shadow: 0 4rpx 8rpx rgba(7, 193, 96, 0.3);">
          шо╛ч╜оф╜Нч╜о
        </button>
      </view>
    </view>
  </view>

  <!-- ч┤зцАехС╝хПл -->
  <view style="margin-bottom: 25rpx;">
    <view style="font-size: 32rpx; color: #333; margin-bottom: 10rpx;">ч┤зцАехС╝хПл</view>
    <view style="background: white; border-radius: 12rpx; padding: 15rpx; display: flex; gap: 10rpx; box-shadow: 0 2rpx 8rpx rgba(0,0,0,0.05);">
      <button bindtap="callPhone" data-phone="120" style="background: white; border: 1px solid #eee; color: #333; padding: 8rpx 15rpx; border-radius: 8rpx; font-size: 26rpx; flex: 1;">120 цАецХСф╕нх┐Г</button>
      <button bindtap="callPhone" data-phone="110" style="background: white; border: 1px solid #eee; color: #333; padding: 8rpx 15rpx; border-radius: 8rpx; font-size: 26rpx; flex: 1;">110 цКешнжчФ╡шпЭ</button>
      <button bindtap="callPhone" data-phone="119" style="background: white; border: 1px solid #eee; color: #333; padding: 8rpx 15rpx; border-radius: 8rpx; font-size: 26rpx; flex: 1;">119 чБлшнжчФ╡шпЭ</button>
    </view>
  </view>

  <!-- ========== цЦ░хвЮя╝Ъч┤зцАех╖ехЕ╖я╝Иф╕АщФохЫЮхо╢ + ф╕АщФохПСщАБхоЪф╜Ня╝Й ========== -->
  <view style="margin-bottom: 25rpx;">
    <view style="font-size: 32rpx; color: #333; margin-bottom: 10rpx;">ч┤зцАех╖ехЕ╖</view>
    <view style="background: white; border-radius: 12rpx; padding: 15rpx; display: flex; gap: 10rpx; box-shadow: 0 2rpx 8rpx rgba(0,0,0,0.05);">
      <button bindtap="goHome" style="background: #ff7d00; color: white; border: none; padding: 8rpx 0; border-radius: 12rpx; font-size: 26rpx; flex: 1; box-shadow: 0 4rpx 8rpx rgba(255, 125, 0, 0.3);">ф╕АщФохЫЮхо╢</button>
      <button bindtap="sendLocation" style="background: #ff7d00; color: white; border: none; padding: 8rpx 0; border-radius: 12rpx; font-size: 26rpx; flex: 1; box-shadow: 0 4rpx 8rpx rgba(255, 125, 0, 0.3);">ф╕АщФохПСщАБхоЪф╜Н</button>
    </view>
  </view>

  <!-- цИСчЪДшБФч│╗ф║║ -->
  <view style="margin-bottom: 25rpx;">
    <view style="font-size: 32rpx; color: #333; margin-bottom: 10rpx;">цИСчЪДшБФч│╗ф║║</view>
    <view style="background: white; border-radius: 16rpx; box-shadow: 0 2rpx 8rpx rgba(0,0,0,0.05);">
      <!-- шБФч│╗ф║║щб╣ -->
      <view wx:for="{{contactsList}}" wx:key="_id" style="padding: 15rpx; border-bottom: 1px solid #f5f5f5; display: flex; justify-content: space-between; align-items: center;">
        <view style="font-size: 30rpx; color: #333; font-weight: 500;">{{item.name}}</view>
        <view style="display: flex; gap: 10rpx; width: 60%;">
          <button bindtap="callPhone" data-phone="{{item.phone}}" style="background: #1890ff; color: white; border: none; padding: 8rpx 0; border-radius: 12rpx; font-size: 26rpx; flex: 1; box-shadow: 0 4rpx 8rpx rgba(24, 144, 255, 0.3);">цЙУчФ╡шпЭ</button>
          <button bindtap="deleteContact" data-id="{{item._id}}" style="background: #ff4d4f; color: white; border: none; padding: 8rpx 0; border-radius: 12rpx; font-size: 26rpx; flex: 1; box-shadow: 0 4rpx 8rpx rgba(255, 77, 79, 0.3);">хИащЩд</button>
        </view>
      </view>
      <!-- ц╖╗хКашБФч│╗ф║║цМЙщТо -->
      <button bindtap="showAddDialog" style="width: 100%; background: linear-gradient(to right, #07c160, #06b358); color: white; border: none; padding: 15rpx 0; border-radius: 0 0 16rpx 16rpx; font-size: 30rpx; box-shadow: 0 4rpx 8rpx rgba(7, 193, 96, 0.3);">ц╖╗хКашБФч│╗ф║║</button>
    </view>
  </view>

  <!-- цПРщЖТщВочо▒я╝Ич╗Яф╕АцЙАцЬЙца╖х╝Пя╝Й -->
  <view>
    <view style="font-size: 32rpx; color: #333; margin-bottom: 10rpx;">цПРщЖТщВочо▒</view>
    <view style="background: white; border-radius: 16rpx; box-shadow: 0 2rpx 8rpx rgba(0,0,0,0.05); overflow: hidden;">
      <view wx:for="{{emailList}}" wx:key="_id" style="padding: 15rpx; border-bottom: 1px solid #f5f5f5; display: flex; justify-content: space-between; align-items: center;">
        <view style="font-size: 30rpx; color: #333; font-weight: 500;">{{item.email}}</view>
        <!-- щВочо▒хИащЩдцМЙщТохМ╣щЕНшБФч│╗ф║║хИащЩдцМЙщТоца╖х╝П -->
        <view style="width: 35%;">
          <button bindtap="deleteEmail" data-id="{{item._id}}" style="background: #ff4d4f; color: white; border: none; padding: 8rpx 0; border-radius: 12rpx; font-size: 26rpx; width: 100%; box-shadow: 0 4rpx 8rpx rgba(255, 77, 79, 0.3);">хИащЩд</button>
        </view>
      </view>
      <!-- ц╖╗хКащВочо▒цМЙщТохМ╣щЕНц╖╗хКашБФч│╗ф║║цМЙщТоца╖х╝П -->
      <button bindtap="showEmailDialog" style="width: 100%; background: linear-gradient(to right, #07c160, #06b358); color: white; border: none; padding: 15rpx 0; font-size: 30rpx; box-shadow: 0 4rpx 8rpx rgba(7, 193, 96, 0.3);">ц╖╗хКацПРщЖТщВочо▒</button>
    </view>
  </view>

  <!-- щВочо▒ц╖╗хКах╝╣чкЧ -->
  <view wx:if="{{showEmailDialog}}" style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); z-index: 999; display: flex; align-items: center; justify-content: center;">
    <view style="width: 80%; background: white; border-radius: 16rpx; padding: 30rpx; box-shadow: 0 6rpx 16rpx rgba(0,0,0,0.1);">
      <view style="font-size: 34rpx; font-weight: bold; text-align: center; margin-bottom: 30rpx; color: #333;">ц╖╗хКацПРщЖТщВочо▒</view>
      <view style="display: flex; align-items: center; margin-bottom: 30rpx;">
        <view style="width: 100rpx; font-size: 32rpx; text-align: right; color: #333;">щВочо▒</view>
        <van-field
          placeholder="чФиф║Ош┐Юч╗нцЬкчн╛хИ░цЧ╢цОецФ╢цПРщЖТщВоф╗╢"
          value="{{email}}"
          bind:input="emailChange"
          type="email"
          custom-style="font-size: 32rpx; flex: 1; border: 1px solid #eee; border-radius: 6rpx; padding: 12rpx; margin-left: 10rpx;"
          placeholder-style="text-align: left; color: #999;"
        />
      </view>
      <view style="display: flex; gap: 20rpx;">
        <button bindtap="bindEmail" style="flex: 1; background: #07c160; color: white; padding: 15rpx 0; border-radius: 8rpx; font-size: 32rpx; border: none;">ф┐ЭхнШ</button>
        <button bindtap="cancelBindEmail" style="flex: 1; background: #f5f5f5; color: #333; padding: 15rpx 0; border-radius: 8rpx; font-size: 32rpx; border: none;">хПЦц╢И</button>
      </view>
    </view>
  </view>

  <!-- ц╖╗хКашБФч│╗ф║║х╝╣чкЧ -->
  <view wx:if="{{showAddDialog}}" style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); z-index: 999; display: flex; align-items: center; justify-content: center;">
    <view style="width: 80%; background: white; border-radius: 16rpx; padding: 30rpx; box-shadow: 0 6rpx 16rpx rgba(0,0,0,0.1);">
      <view style="font-size: 34rpx; font-weight: bold; text-align: center; margin-bottom: 30rpx; color: #333;">ц╖╗хКач┤зцАешБФч│╗ф║║</view>
      <van-field
        label="шБФч│╗ф║║хзУхРН"
        placeholder="шп╖ш╛УхЕехзУхРН"
        value="{{contactForm.name}}"
        bind:input="onFormChange" 
        data-key="name"
        custom-style="font-size: 32rpx; margin-bottom: 20rpx; border: 1px solid #eee; border-radius: 6rpx; padding: 12rpx;"
        label-style="width: 120rpx; color: #333;"
      />
      <van-field
        label="цЙЛцЬ║хП╖"
        placeholder="шп╖ш╛УхЕецЙЛцЬ║хП╖"
        value="{{contactForm.phone}}"
        bind:input="onFormChange"  
        data-key="phone"
        type="number"
        maxlength="11"
        custom-style="font-size: 32rpx; margin-bottom: 30rpx; border: 1px solid #eee; border-radius: 6rpx; padding: 12rpx;"
        label-style="width: 120rpx; color: #333;"
      />
      <view style="display: flex; gap: 20rpx;">
        <button bindtap="onConfirmAddContact" style="flex: 1; background: #07c160; color: white; padding: 15rpx 0; border-radius: 8rpx; font-size: 32rpx; border: none;">ф┐ЭхнШ</button>
        <button bindtap="onCancelAddContact" style="flex: 1; background: #f5f5f5; color: #333; padding: 15rpx 0; border-radius: 8rpx; font-size: 32rpx; border: none;">хПЦц╢И</button>
      </view>
    </view>
  </view>
  <!-- ф╝ШхМЦчЙИцВмц╡оховцЬНцМЙщТо -->
  <view style="position: fixed; right: 30rpx; bottom: 30rpx; z-index: 998;">
  <button 
    open-type="contact" 
    session-from="хТ▒чИ╕хТ▒хжИх╣│хоЙчн╛-цВмц╡оховцЬНцМЙщТо"
    style="width: 100rpx; height: 100rpx; border-radius: 50%; background: linear-gradient(135deg, #07c160, #06b358); color: white; border: none; display: flex; flex-direction: column; align-items: center; justify-content: center; font-size: 24rpx; box-shadow: 0 6rpx 16rpx rgba(7, 193, 96, 0.5); padding: 0; transition: all 0.2s ease;"
    hover-class="hover-class"
  >
    <text style="font-size: 40rpx; margin-bottom: 4rpx;">ЁЯТм</text>
    <text style="display: block; font-size: 20rpx;">ховцЬН</text>
  </button>
</view>
</view>